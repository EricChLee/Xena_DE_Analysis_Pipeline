<div class="row px-3 pb-3">
  <div class="col-lg-3 bold text-lg-right my-auto">
    {{ this.args.label }}
    {%- if this.args.description %}
      <sup data-toggle="tooltip" title="{{ this.args.description }}"><i class="far fa-question-circle"></i></sup>
    {% endif -%}:
  </div>
  <div class="col-lg-6 pt-2 pt-lg-0">
    <select id= "{{ this.args.name }}"
      name="{{ this.args.name }}"
      multiple
      class="form-control nodecoration tiny bg-white px-2 py-1 mb-0"
    >
      {% for choice in this.args.choices %}
        <option{% if choice in this.args.default %} selected{% endif %}>{{ choice }}</option>
      {% endfor %}
    </select>
  </div>
</div>

<script>
(function() {
    var name = "{{ this.args.name }}".split('_')[0];
    var choices = JSON.parse(decodeURIComponent(location.hash.substring(1)))[name];
    var selectBox = document.getElementById('{{ this.args.name }}');
    if (choices) {
        selectBox.innerHTML="";
        for (const c of choices) {
            var option = document.createElement("option");
            option.value = c;
            option.text = c;
            selectBox.appendChild(option);
        }
        if ("{{ this.args.name }}" == 'category_case')
          selectBox.value = [choices[0]];
        else
          selectBox.value = [choices[1]];
    }
})();
</script>